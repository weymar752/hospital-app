services:
  - type: web
    name: hospital-app
    env: docker  # <--- CAMBIO IMPORTANTE: Usamos Docker, no php nativo
    plan: free
    region: oregon
    # Eliminamos buildCommand y startCommand porque el Dockerfile ya se encarga de eso.
    envVars:
      - key: APP_KEY
        sync: false # Esto le dice a Render que use el valor secreto del Dashboard
      - key: APP_DEBUG
        value: true
      - key: APP_URL
        value: $RENDER_EXTERNAL_URL
      - key: LOG_CHANNEL
        value: stderr # <--- CRUCIAL para ver errores
      - key: DB_CONNECTION
        value: pgsql
      - key: DB_HOST
        value: dpg-d56u8tu3jp1c73akpk6g-a.oregon-postgres.render.com
      - key: DB_PORT
        value: 5432
      - key: DB_DATABASE
        value: hospital_ii2p
      - key: DB_USERNAME
        value: hospital_ii2p_user
      # NO pongas DB_PASSWORD aquÃ­, deja que la tome del dashboard